# |
# o---------------------------------------------------------------------o
# |
# | MAD makefile - Fortran files selection and dependencies
# |
# o---------------------------------------------------------------------o
# |
# | Methodical Accelerator Design
# |
# | Copyright (c) 2011+ CERN, mad@cern.ch
# |
# | For more information, see http://cern.ch/mad
# |
# o---------------------------------------------------------------------o
# |
# | $Id$
# |

FC_SRC    := $(wildcard *.f90 *.F90)
FC_SRC_RM := gxx11ps.f90 # obsolete file?

# tpsa settings
ifeq ($(NTPSA),yes)
FC_SRC_RM += c_dabnew.f90
else
FC_SRC_RM += c_dabnew_berz.f90 c_tpsa_interface.F90
endif

# remove unwanted files
FC_SRC := $(filter-out $(FC_SRC_RM),$(FC_SRC))

# files specific compiler flag
$(OBJDIR)/matchlib2.o: FFLAGS := $(patsubst -O%,-O0,$(FFLAGS))

include madx-dep-f90.d

#######################
# Fortran dependencies (case not automatic!)

ifeq ($(FDEP),)

Sa_extend_poly.f90:                                   
Sb_sagan_pol_arbitrary.f90:                                   
Sc_euclidean.f90:                                   
Sd_frame.f90:                                   
Se_status.f90:                                   
Sf_def_all_kinds.f90:                                   
Sg_sagan_wiggler.f90:                                   
Sh_def_kind.f90:                                   
Si_def_element.f90:                                   
Sk_link_list.f90:                                   
Sl_family.f90:                                   
Sm_tracking.f90:                                   
Sma0_beam_beam_ptc.f90:                                   
Sma_multiparticle.f90:                                   
Sn_mad_like.f90:                                   
So_fitting.f90:                                   
Sp_keywords.f90:                                   
Spb_fake_gino_sub.f90:                                   
Sq_orbit_ptc.f90:                                   
Sr_spin.f90:                                   
Sra_fitting.f90:                                   
St_pointers.f90:                                   
a_scratch_size.f90:                                   
b_da_arrays_all.f90:                                   
c_dabnew.f90:                                   
c_dabnew_berz.f90:                                   
c_tpsa_interface.F90:                                   
d_lielib.f90:                                   
dynap.f90:                                   
emit.f90:                                   
gxx11.f90:                                   
h_definition.f90:                                   
i_tpsa.f90:                                   
ibsdb.f90:                                   
j_tpsalie.f90:                                   
k_tpsalie_analysis.f90:                                   
l_complex_taylor.f90:                                   
m_real_polymorph.f90:                                   
mad_inif_f.F90:                                   
madx_ptc_distrib.f90:                                   
madx_ptc_eplacement.f90:                                   
madx_ptc_intstate.f90:                                   
madx_ptc_knobs.f90:                                   
madx_ptc_module.f90:                                   
madx_ptc_normal.f90:                                   
madx_ptc_script.f90:                                   
madx_ptc_setcavs.f90:                                   
madx_ptc_track_run.f90:                                   
madx_ptc_trackcavs.f90:                                   
madx_ptc_twiss.f90:                                   
match.f90:                                   
matchjc.f90:                                   
matchlib.f90:                                   
matchlib2.f90:                                   
matchsa.f90:                                   
n_complex_polymorph.f90:                                   
o_tree_element.f90:                                   
orbf.f90:                                   
plot.f90:                                   
poisson.f90:                                   
ptc_export_xml.f90:                                   
resindex.f90:                                   
sodd.f90:                                   
survey.f90:                                   
timest.f90:                                   
timex.f90:                                   
touschek.f90:                                   
trrun.f90:                                   
twiss.f90:                                   
user2_photon.f90:                                   
util.f90:                                   
wrap.f90:                                   

endif

# end of makefile
