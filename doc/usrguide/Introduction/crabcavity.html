<head>
<title>CRABCAVITY</title>
<!-- Added by: R. Calaga, Sep 2010 -->
</head>

<body bgcolor="#ffffff">

<center>
EUROPEAN ORGANIZATION FOR NUCLEAR RESEARCH
<IMG SRC="http://cern.ch/madx/icons/mx7_25.gif" align=right>
<h2>CRAB Cavity</h2>
</center>

<pre>

label: CRABCAVITY, L=real,VOLT=real,LAG=real,FREQ=real,
rv1=integer, rv2=integer, rv3=integer, rv4=integer, 
rph1=integer, rph2=integer,lagf=real;
                  <!-- HARMON=integer, BETRF=real,PG=real,
                 FREQ=real,SHUNT=real,TFILL=real; -->
</pre>
An CRABCAVITY has ten real attributes and seven integer attributes:
<ul>
<li>L:
The length of the cavity (default: 0 m)
<li>VOLT:
The peak RF voltage (default: 0 MV).
The effect of the cavity is
<p>
delta(<i>px</i>)  = VOLT * sin( &phi; - &omega * t) <br>
delta(<i>E</i>)  = -  VOLT * &omega * x * cos(&phi; - &omega * t) <br>
(where, &phi =  sin(2 &pi; * (LAG - HARMON * <i>f<sub>0</sub> t</i>))) <br>
<!--- delta(<i>E</i>) = VOLT * 
sin(2 pi * (LAG - HARMON * <i>f<sub>0</sub> t</i>)). -->
<p>

<li>LAG:
The initial phase lag [2pi] (default: 0).
<li>FREQ:
The frequency [MHz] <i>fenergy</i>(no default).
Note that if the RF frequency is not given, it is
computed from the harmonic number
and the revolution frequency <i>f<sub>0</sub></i> as before. However,
for deflecting structures this makes no sense, 
and the frequency is mandatory. <br>

<li>RV1:
Number of initial turns with zero voltage(default: 0).
<li>RV2:
Number of turns to ramp voltage from zero to nominal(default: 0).
<li>RV3:
Number of turns with nominal voltage (default: 0).
<li>RV4:
Number of turns to ramp voltage from nominal to zero(default: 0). 
<br>
<li>RPH1:
Number of initial turns with nominal phase (default: 0).
<li>EPHASE:
Value of the final crab RF phase [2pi] with respect to  nominal value (default: 0).
<li>RPH2:
Number of turns to ramp phase [2pi] from nominal to specified value(default: 0).
<br>
<li>HARMON:
The harmonic number <i>h</i> (no default). Only if the frequency is not given.
<!-- <li>BETRF:
RF coupling factor (default: 0).
<li>PG:
The RF power per cavity (default: 0 MW).
<li>SHUNT:
The relative shunt impedance (default: 0 MOhm/m).
<li>TFILL:
The filling time of the cavity T<sub>fill</sub>
(default: 0 microseconds). -->
<li><font color=ff0000><i> Please take note, that the following
MAD8 attributes: BETRF, PG, SHUNT and TFILL are currently not
implemented in MAD-X!</i><
<li><i> Note that crab cavities are only implemented for tracking 
purposes. TWISS will ignore any effect of the crab cavity. 
<!-- as well that twiss is 4D only. As a consequence the TWISS
parameters in the plane of non-zero dispersion may not close as
expected. Therefore, it is best to perform TWISS in 4D only, i.e. with
cavities switched off. If 6D is needed one has to use the

<a href="../ptc_twiss/ptc_twiss.html">ptc_twiss</a> command. -->
</i></font>
</ul>
A cavity requires the particle energy
(<a href="beam.html#energy">ENERGY</a>)
and the particle charge
(<a href="beam.html#charge">CHARGE</a>)
to be set by a <a href="beam.html">BEAM</a> command
before any calculations are performed.
<p>
Example:
<pre>
BEAM, PARTICLE=PROTON, ENERGY=7000.0;
CAVITY:  CRABCAVITY, L=10.0, VOLT=5.0, LAG=0.0, FREQ=400,
rv1=0, rv2=50, rv3=1000, rv4=50, rph1=100, rph2=500,lagf=0.125;

</pre>
The <a href="local_system.html#straight">straight reference system</a>
for a cavity is a cartesian coordinate system.
<p>
<address>
<a href="http://www.cern.ch/rcalaga">R. Calaga</a>,
September 2010
</address>

</body>
