<head>
<title>SELECT</title>
<!-- Changed by: Hans Grote, 11-Sep-2002 -->
<link rel="stylesheet" type="text/css" href="madxdoc.css" />
</head>

<body bgcolor="#ffffff">

<center>
EUROPEAN ORGANIZATION FOR NUCLEAR RESEARCH
<IMG SRC="http://cern.ch/madx/icons/mx7_25.gif" align=right>
<h2>Sectormap output</h2>
</center>

<!--Begin New version: Jean-Luc Nougaret, 18-Dec-2008 -->

<p>
The flag "sectormap" on the Twiss command (together with an element
selection via select,flag=sectormap,...) causes a file "sectormap" to
be written. 
</p>

<p>For each user-selected element, it contains the user-selected coefficients of the kick vector <code>K</code> (6 values), of the first-order map <code>R</code> (6 x 6 values) and of the second-order map <code>T</code> (6 x 6 x 6 values)</p>

<p>
The sector file is the output of a standard TFS table, which means that the set of columns of interest may be selected through a MAD-X command such as the following:
</p>

<p>
<table bgcolor='#EEEEEE' width="75%">
<tr><td><code>select,flag=my_sect_table,column=name,pos,k1,r11,r66,t111;</code></tr></td>
</table>
</p>

Each line of the sectormap file contains for each selected element, the set of chosen K,R,T matrix coefficients:<br><br>

<table bgcolor='#EEEEEE' width="75%">
<tr><td>@ NAME</td><td>             %13s</td><td> "MY_SECT_TABLE"</td></tr>
<tr><td>@ TYPE</td><td>             %09s</td><td> "SECTORMAP"</td></tr>
<tr><td>@ TITLE</td><td>            %08s</td><td> "no-title"</td></tr>
<tr><td>@ ORIGIN</td> <td>          %19s</td><td> "MAD-X 3.04.62 Linux"</td></tr>
<tr><td>@ DATE</td><td>             %08s</td><td> "18/12/08"</td></tr>
<tr><td>@ TIME</td><td>             %08s</td><td> "10.33.58"</td></tr>
</table>
<table bgcolor='#EEEEEE' width="75%">
<tr><td>* NAME</td><td>POS</td><td>K1</td><td>R11</td><td>R66</td><td>T111</td></tr> 
<tr><td>$ %s</td><td>%le</td><td>%le</td><td>%le </td><td>%le</td><td>%le</td></tr>
<tr><td> "FIVECELL$START" </td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td></tr>
<tr><td> "SEQSTART" </td><td>0</td><td> 0 </td><td> 1</td><td> 1 </td><td> 0</td></tr>
<tr><td> "QF.1" </td><td>3.1</td><td>-1.305314637e-05</td><td>1.042224745</td><td>1</td><td>0</td></tr>
<tr><td> "DRIFT_0"</td><td>3.265</td><td>7.451656548e-21</td><td>1</td><td>1</td><td>0</td></tr>
<tr><td> "MSCBH"</td><td>4.365</td><td>-1.686090613e-15</td><td>0.9999972755</td><td>1</td><td>0.006004411526</td></tr>
<tr><td> "CBH.1"</td><td>4.365</td><td>0</td><td>1</td><td>1</td><td>0</td></tr>
<tr><td> "DRIFT_1"</td><td>5.519992305</td><td>-6.675347543e-21</td><td>1</td><td>1</td><td>0</td></tr>
<tr><td> "MB"</td><td>19.72000769</td><td>2.566889547e-18</td><td>1.000000091</td><td>1</td><td>-4.135903063e-25</td></tr>
<tr><td> "DRIFT_2"</td><td>21.17999231</td><td>-1.757758802e-20</td><td>1</td><td>1</td><td>0</td></tr>
<tr><td> "MB"</td><td>35.38000769</td><td>2.822705549e-18</td><td>1.000000091</td><td>1</td><td>-4.135903063e-25</td></tr>
<tr><td> "DRIFT_2"</td><td>36.83999231</td><td>2.480880093e-20</td><td>1</td><td>1</td><td>0</td></tr>
<tr><td> "MB"</td><td>51.04000769</td><td>3.006954115e-18</td><td>1.000000091</td><td>1</td><td>-4.135903063e-25</td></tr>
<tr><td> "DRIFT_3"</td><td>52.21</td><td>-4.886652187e-20</td><td>1</td><td>1</td><td>0</td></tr>
<tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr>
<tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr>
<tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr>
</table>

<br>
Of course, the <code>select</code> statement can be combined with additional options to filter-out the list of elements, such as in the following statement, which for instance only retains drift-type elements:
<p>
<table bgcolor='#EEEEEE' width="75%">
<tr><td><code>select,flag=my_sect_table,class=drift,column=name,pos,k1,r11,r66,t111;</code></tr></td>
</table>
</p>

<p>
<code>K</code> coefficients range:
<code>K1</code>... <code>K6</code>
</p>

<p>
<code>R</code> coefficients range:
<table>
<tr><td><code>R11</code></td><td>...</td><td><code>R61</code></td></tr>
<tr><td><code>R12</code></td><td>...</td><td><code>R62</code></td></tr>
<tr><td>...</td><td>...</td><td>...</td></tr>
<tr><td><code>R16</code></td><td>...</td><td><code>R66</code></td></tr>
</table>
</p>

<p>
<code>T</code> coefficients range:
<table>
<tr><td><code>T111</code></td><td>...</td><td><code>T611</code></td></tr>
<tr><td><code>T121</code></td><td>...</td><td><code>T621</code></td></tr>
<tr><td>...</td><td>...</td><td>...</td></tr>
<tr><td><code>T161</code></td><td>...</td><td><code>T661</code></td></tr>
<tr><td><code>T112</code></td><td>...</td><td><code>T612</code></td></tr>
<tr><td>...</td><td>...</td><td>...</td></tr>
<tr><td><code>T166</code></td><td>...</td><td><code>T666</code></td></tr>
</table>
</p>

<p>
In the above notation, <code>Rij</code> stands for "effect on the <code>i</code>-th coordinate of the <code>j</code>-th coordinate in phase-space", whereas <code>Tijk</code> stands for "combined effect on the <code>i</code>-th coordinate of both the <code>j</code>-th and <code>k</code>-th coordinates in phase-space" along the lattice.
</p>

<!--End New Version -->

<!-- Commented by jluc, on 18 December 2008
The flag "sectormap" on the Twiss command (together with an element
selection via select,flag=sectormap,...) causes a file "sectormap" to
be written. This is a fixed format file; per selected element it
contains:

<pre>
end_position   element_name
kick vector (6 values)
first order map (6 lines with 6 values each), column-wise
second order map (36 lines with 6 columns each, column-column-wise)
</pre>

Or more explicitly:

<pre>
The first line is:
K[1] ... K[6]

Then: 
R[1,1] ... R[6,1]
R[1,2] ... R[6,2]
...
R[1,6] ... R[6,6]


Then:
T[1,1,1] ... T[6,1,1]
T[1,2,1] ... T[6,2,1]
...
T[1,6,1] ... T[6,6,1]
T[1,1,2] ... T[6,1,2]
...
T[1,6,6] ... T[6,6,6]
</pre>
-->


The maps are the accumulated maps between the selected elements. They contain
both the alignment, and field errors present.
Together with the starting value of the closed orbit (which can be obtained
from the standard twiss file) this allows the user to track particles over
larger sectors, rather than element per element. A typical usage therefore
lies in the interface to other programs, such as TRAIN.
<address>
<a href="http://www.cern.ch/Hans.Grote/hansg_sign.html">hansg</a>,
May 8, 2001
</address>
</body>





