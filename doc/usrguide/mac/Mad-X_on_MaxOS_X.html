<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>












  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1"><title>Mad-X on MaxOS X</title></head><body>
<h3 style="text-decoration: underline;">Mad-X on Mac OS X</h3>

<img src="ball_red.gif" align="top"> <a href="http://en.wikipedia.org/wiki/Macosx">Mac OS X</a> is <a href="http://www.apple.com/macosx/features/unix/">based</a> on a
standard <a href="http://developer.apple.com/opensource/index.html">open
source</a> <a href="http://en.wikipedia.org/wiki/FreeBSD">FreeBSD</a> <a href="http://en.wikipedia.org/wiki/Unix">Unix</a> system called <a href="http://en.wikipedia.org/wiki/OpenDarwin">darwin</a>. All
necessary software except for the <a href="http://en.wikipedia.org/wiki/Fortran">fortran</a> <a href="http://en.wikipedia.org/wiki/Compiler">compilers</a> comes with
the
standard installer discs as optional installs, developer or <a href="http://en.wikipedia.org/wiki/Xcode">Xcode</a> tools.<br>
<br>
<img src="ball_red.gif" align="top"> For older Mac OS X systems (<a href="http://en.wikipedia.org/wiki/Mac_OS_X_v10.1">10.1</a>
"Puma", <a href="http://en.wikipedia.org/wiki/Mac_OS_X_v10.2">10.2</a>
"Jaguar") :&nbsp; install X11 from <a href="http://prdownloads.sourceforge.net/xonx">XFree86</a><br>
<br>
<img src="ball_red.gif" align="top"> System <a href="http://en.wikipedia.org/wiki/Mac_OS_X_v10.3">10.3</a> (Mac OS X
Panther):<br>
Run the corresponding installers (for System 10.3 "Jaguar" run
X11User.pkg from&nbsp;&nbsp; "Mac OS X Install Disc 3" and the
Developer installer Developer.mpkg or directly X11SDK.pkg.<br>
<br>
<img src="ball_red.gif" align="top"> System <a href="http://en.wikipedia.org/wiki/Mac_OS_X_v10.4">10.4</a> (Mac OS X
Tiger):<br>
Install the gcc compiler and <a href="http://en.wikipedia.org/wiki/X11">X11</a>
from the installation discs. Run the
XcodeTools installer and select the gcc 4.0 compiler and X11 SDK. <br>
The X11 application is in Optional Installs (typically on the main
installation disc towards the bottom - enlarge the window if you do not
see it).<br>
<br>
<img src="ball_red.gif" align="top"> System <a href="http://en.wikipedia.org/wiki/Mac_OS_X_v10.5">10.5</a> and <a href="http://en.wikipedia.org/wiki/Mac_OS_X_v10.6">10.6</a> (Mac OS X
Leopard and Snow Leopard):<br>
X11 is by default installed. Run the XcodeTools installer in optional
installs to get Xcode which includes the gcc compiler.<br>
<br>
At CERN, you have access to MacOS X system software from <a href="http://it-div.web.cern.ch/it-div/gencomputing/mac-support/default.asp">CERN
Mac Support</a> ( connect to <a href="smb://cerndata44.cern.ch/d-it-s-mac$">smb://cerndata44.cern.ch/d-it-s-mac$</a> or
via <a href="https://dfs.cern.ch/dfs/Departments/IT/Services/MacSupport/">dfs</a>
).<br>
<br>
<img src="ball_red.gif" align="top">&nbsp;
For the installation of fortran as part of the <a href="http://gcc.gnu.org/onlinedocs/">open
source gnu compilers</a> for
Mac OS X use can use <a href="http://en.wikipedia.org/wiki/MacPorts">MacPorts</a> or <a href="http://en.wikipedia.org/wiki/Fink">Fink</a>.<br>
The default fortran compiler for MadX used to be <a href="http://pdb.finkproject.org/pdb/package.php/g95">g95</a> available with&nbsp; <span style="font-style: italic;">fink install g95 </span>and more recently <a href="http://en.wikipedia.org/wiki/Gfortran">gfortran</a> which comes with gcc44 in MacPorts or Fink.<br>
The Mad-X Makefile is prepared for Mac OS X. If your Unix environment
is correctly set up then you can simply <a href="http://en.wikipedia.org/wiki/Make_%28software%29">make</a> the Mad-X <a href="http://en.wikipedia.org/wiki/Executable">executable</a> madx by
typing<span style="font-style: italic;">&nbsp; make </span>.<br><br>
<img src="ball_red.gif" align="top"> Binaries of Mad-X are made
available and may save you compilation but still require the availibility of the gfortran library from Fink.<br>
Until 11/2009 they were made using using
system 10.5 (Leopard), both for the ppc and i386 architecture, and
stored in
the <a href="http://frs.web.cern.ch/frs/MAC-OS/">MAD-X MAC
binary
directory</a> as <a href="http://en.wikipedia.org/wiki/Universal_Binaries">universal
binaries</a>. These modules also run on on system 10.6 (Snow Leopard).
From December 2009 on, the modules are made using 10.6 (Snow Leopard)
for the i386 architecture. The ONLINE version which requires SDDS
libraries is currently disabled by default for the MAC platform.<br>
The Mad-X binaries require the
presence of dynamic libraries like /usr/X11/lib/libX11.6.dylib which
maybe missing on older systems. This can be checked via <span style="font-style: italic;">otool -L madx</span>. As alternative to
updating to a newer system or making your own executables, you could
try to change the shared library names to libraries existing on your
system like:&nbsp;&nbsp; <span style="font-style: italic;">install_name_tool
-change /usr/X11/lib/libX11.6.dylib /usr/X11R6/lib/libX11.6.dylib madx</span><br>
To start madx you may have to make the module executable with a command
like <span style="font-style: italic;">chmod +x madx</span>. As other Unix <a href="http://en.wikipedia.org/wiki/Command_line">command line</a>
tools, the Mad-X
executable is started by typing its name, in the simplest case just by
typing <span style="font-style: italic;">madx</span>.
Depending on the madx location and<span style="text-decoration: underline;"></span> <a href="http://en.wikipedia.org/wiki/Path_%28computing%29">PATH</a>
settings, you may have to preceede the executable name with ./ or give
the full path name.<br>
If you get an error in launching the module like "Malformed Mach-o
file.", it is likely that the file was modified in the download. Try
then another browser (i.e. Firefox instead of Safari) or if you have
access to afs at CERN or if you can login to lxplus, consider to copy
or run the module directly from the afs directory
/afs/cern.ch/eng/sl/MAD-X/pro/bin/V4.01&nbsp;&nbsp;&nbsp;&nbsp; (&nbsp;
/afs/cern.ch/eng/sl/MAD-X/pro/.x86_darwin_90/bin/V4.01&nbsp; ) .<br>
<br>
<img src="ball_red.gif" align="top"> How can I check that the necessary
compilers and header files are there ?<br>
To check the compilers are available, you may want to type in
terminal:&nbsp; <span style="font-style: italic;">which gcc; which
gfortran</span><br>
The normal location for gcc is /usr/bin and for the extra fortran
compilers the fink directory ( /sw/bin ). The fink directory is
normally added to the path by a <span style="font-style: italic;">source
/sw/bin/init.csh</span> in .tcshrc or&nbsp; <span style="font-style: italic;">source /sw/bin/init.sh</span>&nbsp; etc.
depending on your <a href="http://en.wikipedia.org/wiki/Unix_shell">Unix
shell</a>.<br>
The standard X11 header file location is /usr/X11/include/X11 or&nbsp;
/usr/X11R6/include/X11 for olders systems.<br>
<br>
<hr style="width: 100%; height: 2px;"><br>
<img src="ball_red.gif" align="top">&nbsp; New in Jan 2011&nbsp;
:&nbsp; Mad-X can be installed as complete bundle. No need to install
extra libraries&nbsp; ( thanks to Yngve Levinssen ).<br>
If you just want to run Mad-X and not to compile / modify yourself, you
can simply&nbsp; download the most recent <a href="http://en.wikipedia.org/wiki/Apple_Disk_Image">disk image</a> (&nbsp; .dmg&nbsp; ) version from the actual <a href="http://frs.web.cern.ch/frs/MAC-OS/">MAD-X MAC
binary
directory</a> ,&nbsp; double click on it to install and move madx_dev.app to your preferred working directory.<br>
<br>

Run the <a href="http://en.wikipedia.org/wiki/Apple_Terminal">Mac OS X terminal application</a>. Go to your working directory which contains the madx_dev.app and type:<br>

<span style="font-style: italic;">./madx_dev.app/Contents/MacOS/madx_dev</span><br>

<br>
<hr style="width: 100%; height: 2px;"><br>
<img src="ball_red.gif" align="top">&nbsp; afs names of older and actual binary directories:<br>
/afs/cern.ch/eng/sl/MAD-X/pro/.i386_linux24/bin/V2.11/MAC-OS<br>
/afs/cern.ch/eng/sl/MAD-X/pro/.i386_linux24/bin/V2.12/MAC-OS<br>
/afs/cern.ch/eng/sl/MAD-X/pro/.i386_linux24//bin/V2.13/MAC-OS<br>
/afs/cern.ch/eng/sl/MAD-X/pro/.i386_linux24/bin/V3.00/MAC-OS<br>
/afs/cern.ch/eng/sl/MAD-X/pro/.i386_linux24/bin/V3.01/MAC-OS<br>
/afs/cern.ch/eng/sl/MAD-X/pro/.i386_linux24/bin/V3.02/MAC-OS<br>
/afs/cern.ch/eng/sl/MAD-X/pro/.i386_linux24/bin/V3.03/MAC-OS<br>
/afs/cern.ch/eng/sl/MAD-X/pro/.i386_linux24/bin/V3.04/MAC-OS<br>
/afs/cern.ch/eng/sl/MAD-X/pro/.i386_linux24//bin/V4.00/MAC-OS<br>
/afs/cern.ch/eng/sl/MAD-X/pro/.x86_darwin_90/bin/V4.01<br>
/afs/cern.ch/eng/sl/MAD-X/pro/.x86_darwin_90/bin/V5.00<br>
<br>
Last production version :<br>
install:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/afs/cern.ch/eng/sl/MAD-X/pro/.x86_darwin_90/bin/V5.00/madX-5.00.00-Darwin.dmg<br>
run: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ./madx.app/Contents/MacOS/madx<br>
<hr style="width: 100%; height: 2px;"><br>
Contact:&nbsp; Helmut Burkhardt<br>

</body></html>