%%\title{Threader}

\section{Beam Threader} 
The \textbf{threader} simulates beam steering through a machine with
field and alignment errors in situations where the beam does not
circulate and the closed orbit cannot be measured.  

If enabled, threading is executed whenever a trajectory or closed orbit
search is carried out by the \href{../twiss/twiss.html}{TWISS} module.  

The following MAD-X commands control the action of the threader :   
\begin{verbatim}
option, threader ;
\end{verbatim}  
enables the threader 

When set, the threader checks at all monitors the difference with
respect to the stored orbit there (from
\href{../twiss/twiss.html}{keeporbit}) if
\href{../twiss/twiss.html}{useorbit} is present. The threader then
provides kicks (if possible) to reduce the orbit difference below the
maxima specified on the threader command. This procedure allows to
thread with orbit bumps present.   

\begin{verbatim}
threader, vector = {xmax, ymax, att} ;
\end{verbatim}  
sets the parameters for the threader 
\begin{verbatim}
xmax, ymax : orbit excursion (at a monitor) at which threader acts
att        : attenuation factor for the kicks applied by the threader
defaults   : {0.005, 0.005, 1.000}
\end{verbatim}


% Hans Grote, 31.10.2008 
