%\documentclass[a4paper,11pt]{article}
%%\usepackage{ulem}
%%\usepackage{a4wide}
%%\usepackage[dvipsnames,svgnames]{xcolor}
%%\usepackage[pdftex]{graphicx}
%%\title{DYNAP}
%  Changed by: Hans Grote, 17-Jun-2002 

%  Changed by: Frank Zimmermann, 18-Jun-2002 

%%\usepackage{hyperref}
% commands generated by html2latex


%%\begin{document}
%%\begin{center}

 %%EUROPEAN ORGANIZATION FOR NUCLEAR RESEARCH
 
%%\includegraphics{http://cern.ch/madx/icons/mx7_25.gif}

\subsection{DYNAP: Tunes, Tune Footprints, Smear and Lyapunov Exponent}
%%\end{center}


 DYNAP can be called instead of RUN inside a TRACK command:
 
\begin{verbatim}
DYNAP,TURNS=real, FASTUNE=logical,LYAPUNOV=real,MAXAPER:={..,..,..,..,..,..},
ORBIT=logical;
\end{verbatim}
 
 For each previously entered start command, 
 DYNAP tracks two close-by particles over a selected 
 number of turns, from which it obtains the
 betatron tunes with error, the action smear,
 and an estimate of  the lyapunov exponent. 
 Many such companion particle-pairs 
 can be tracked at the same time, which
 speeds up the calculation.
 The \textit{ smear } is defined as 
 \textit{2.0 (wxy$_max$ - wxy$_min$) / (wxy$_max$ + wxy
 $_min$)}, where the \textit{wxy$_min,max$} refer to the 
 miminum and maximum values of the sum of the transverse betatron invariants
 \textit{wx+wy} during the tracking. The tunes are computed by 
 using an FFT and either formula (18) or formula
 (25) of CERN SL/95-84 (AP),
 depending on whether the number of turns is less-equal or
 larger than 64.
 
 


 The arguments have the following meaning:
 
\begin{itemize}
	\item \href{particle}{TURNS}:
 The number of turns to be tracked (default: 64, present maximum: 1024).
 
	\item \href{particle}{FASTUNE}:
 A logical flag. If set, the tunes are computed (default: false).
 
	\item \href{particle}{MAXAPER}:
 If the particle phase-space coordinates exceed certain 
 \textit{ maximum }
 values, the particle is considered lost. The maximum aperture
 is a vector of 6 real numbers 
 (default: (0.1, 0.01, 0.1,0.01, 1.0, 0.1) ).
 
	\item \href{particle}{LYAPUNOV}:
 The launch distance 
 between two companion particles 
 added to the \textit{x} coordinate (default: 1.e-7 m).
 
	\item \href{particle}{ORBIT}:
 A logical flag. If set, the flag \textit{orbit} 
 is true during the tracking and its initialization
 (default: true).
 \textbf{ This flag should be set to be true, if 
 normalized coordinates are to be entered.}
\end{itemize}


 Example:
 
\begin{verbatim}
BEAM,PARTICLE=ELECTRON,ENERGY=50,EX=1.E-6,EY=1.E-8,ET=0.002,SIGT=1.E-2;
...
USE,PERIOD=FODO;
...
TRACK;
START,X=0.0010,Y=0.0017,PT=0.0003;
DYNAP,FASTUNE,TURNS=1024,LYAPUNOV=1.e-7;
ENDTRACK;
...

\end{verbatim}
 The first command defines the beam parameters. It is 
 essential that the longitudinal emittance \textit{ET}
 is set. The command \textit{use} selects the beam line
 or sequence. The \textit{track} activates the tracking
 module, \textit{start } enters the starting coordinates
 (more than one particle can be defined), 
 \textit{dynap} finally tracks two nearby particles 
 with an initial distance \textit{lyapunov} 
 for each \textit{start} definition over \textit{ turns }
 revolutions, and \textit{endtrack} terminates
 the execution of the tracking module.
 
 
 


 The results are stored in the \textit{DYNAP} and 
 \textit{ DUNAPTUNE } tables, and can be obtained by the commands 
 
\begin{verbatim}
value,table(dynap,smear);\end{verbatim} 
 resp. 
\begin{verbatim}
value,(dynaptune,tunx),(dynaptune,tuny),(dynaptune,dtune);\end{verbatim}


 More generally, all results can be printed to a file, using the commands 
 
\begin{verbatim}
write,table=dynap,file;
write,table=dynaptune,file;
\end{verbatim}


 The output file 'lyapunov.data' lists  
 the turn number and phase distance between the 
 two Lyapunov partners, respectively, 
 allowing for visual inspection of chaoticity.
 
 \href{http://consult.cern.ch/xwho/people/62690}{frankz}
 20.03.2006
 

%%\end{document}
