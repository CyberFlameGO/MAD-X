<head>
<title>EALIGN</title>
<!-- Changed by: Hans Grote, 13-Sep-2000 -->
<!-- Changed by: Werner Herr, 19-Jun-2002 -->
<!-- Changed by: Hans Grote, 19-Jun-2002 -->
<!-- Changed by: Werner Herr, 24-Jul-2002 -->
<!-- Changed by: Werner Herr, 02-Sep-2002 -->
<!-- Changed by: Hans Grote, 25-Sep-2002 -->
</head>

<body bgcolor="#ffffff">

<h1>EALIGN: Define Misalignments</h1>

Alignment errors are defined by the EALIGN command.
The misalignments refer to the
<a href="../Introduction/local_system.html">local reference system</a>
for a perfectly aligned machine.
Possible misalignments are displacements along the three coordinate axes,
and rotations about the coordinate axes.
Alignment errors can be assigned to all beam elements except drift spaces.
The effect of misalignments is treated in a linear approximation.
A <a name=read HREF="../Introduction/monitors.html">Beam position monitor</a>
can be given read errors in both horizontal and vertical planes.
Monitor errors (MREX, MREY, MSCALX and MSCALY) are ignored for all other elements.
Each new EALIGN statement replaces the misalignment errors
for all elements in its range, unless EOPTION,ADD=TRUE has been entered.
<p>
Alignment errors are defined by the statement
<pre>
SELECT,FLAG=ERROR,RANGE=range,CLASS=name,PATTERN=string;
EALIGN, DX=real,DY=real,DS=real, 
        DPHI=real,DTHETA=real,DPSI=real, 
        MREX=real,MREY=real,
        MSCALX=real,MSCALY=real,
        AREX=real,AREY=real;
</pre>
and elements are now selected by the <a href="../Introduction/select.html">SELECT</a> command.
The attributes are:
<p>DX:
The misalignment in the <i>x</i>-direction
for the entry of the beam element (default: 0 m).
<br>
DX&gt;0 displaces the element in the positive <i>x</i>-direction
<p>DY:
The misalignment in the <i>y</i>-direction
for the entry of the beam element (default: 0 m).
<br>
DY&gt;0 displaces the element in the positive <i>y</i>-direction
<p>DS:
The misalignment in the <i>s</i>-direction
for the entry of the beam element (default: 0 m).
<br>
DS&gt;0 displaces the element in the positive <i>s</i>-direction
<p>DPHI:
The rotation around the <i>x</i>-axis.
<br>
A positive angle gives a greater <i>x</i>-coordinate for the exit
than for the entry (default: 0 rad).
<p>DTHETA:
The rotation around the <i>y</i>-axis according to the right hand
rule (default: 0 rad).
<p>DPSI:
The rotation around the <i>s</i>-axis according to the right hand
rule (default: 0 rad).
<p>MREX:
The horizontal read error for a monitor.
This is ignored if the element is not a monitor
<br>
If MREX&gt;0 the reading for <i>x</i> is too high (default: 0 m).
<p>MREY:
The vertical read error for a monitor.
This is ignored if the element is not a monitor
<br>
If MREY&gt;0, the reading for <i>y</i> is too high (default: 0 m).
<p>AREX:
The misalignment in the <i>x</i>-direction
for the entry of an aperture limit (default: 0 m).
<br>
AREX&gt;0 displaces the element in the positive <i>x</i>-direction
<p>AREY:
The misalignment in the <i>y</i>-direction
for the entry of an aperture limit (default: 0 m).
<br>
AREY&gt;0 displaces the element in the positive <i>y</i>-direction
<p>MSCALX:
The relative horizontal scaling error for a monitor.
This is ignored if the element is not a monitor.
<br>
If MSCALX&gt;0 the reading for <i>x</i> is too high (default: 0).
A value of 0.5 implies the actual reading is multiplied by 1.5.
<p>MSCALY:
The relative vertical scaling error for a monitor.
This is ignored if the element is not a monitor. 
<br>
If MSCALY&gt;0 the reading for <i>y</i> is too high (default: 0).
A value of -0.3 implies the actual reading is multiplied by 0.7.
<br>
<br>
<br>
<font COLOR="#ff0000">
Example:
<pre>
SELECT,FLAG=ERROR,CLASS=MQ;                  
EALIGN,DX=0.002,DY=0.0004*RANF(),DPHI=0.0002*GAUSS();
</pre>
</font>
Assigns alignment errors to all elements of class MQ.          
<br>
<font COLOR="#ff0000">
<pre>
SELECT,FLAG=ERROR,PATTERN="QF.*";            
EALIGN,DX=0.001*TGAUSS(2.5),DY=0.0001*RANF();
</pre>
</font>
Assigns alignment errors to all elements starting with "QF".
TGAUSS(2.5) means a Gaussian distribution cut at 2.5 sigma.
<br>
<p>
<a name=xsdisp><img align=bottom src="./xs_align.gif"></a>
<p>
<b>Figure 1:</b> Example of Misplacement in the (<i>x, s</i>)-plane.
<p>
<a name=xydisp><img align=bottom src="./dpsi.gif"></a>
<p>
<b>Figure 2:</b> Example of Misplacement in the (<i>x, y</i>)-plane.
<p>
<a name=ysdisp><img align=bottom src="./ys_align.gif"></a>
<p>
<b>Figure 3:</b> Example of Misplacement in the (<i>y, s</i>)-plane.
<p>
<a name=monitor><img align=bottom src="./monitor_read.gif"></a>
<p>
<b>Figure 4:</b> Example of Read Errors in a monitor
<br>
<br>
<br>
<br>
<address>
<a href="http://consult.cern.ch/xwho/people/1808">Last updated:</a>
02.9.2002
</address>
<address>
<a href="http://consult.cern.ch/xwho/people/1808">Werner Herr</a>
18.6.2002
</address>

</body>
