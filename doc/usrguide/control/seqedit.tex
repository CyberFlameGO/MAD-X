%%%\title{Sequence Editor}
%  Changed by: Chris ISELIN, 24-Feb-1998 

%  Changed by: Hans Grote, 17-Jun-2002 

%%%\usepackage{hyperref}
% commands generated by html2latex


%%%\begin{document}
%%%\begin{center}
 %%%EUROPEAN ORGANIZATION FOR NUCLEAR RESEARCH 
%%%\includegraphics{http://cern.ch/madx/icons/mx7_25.gif}

\subsection{Edit a Beam Line Sequence}
%%%\end{center}

 With the help of the commands explained below, a sequence may be modified in many ways: the starting point can be moved to another place; the order of elements can be inverted; elements can be inserted one by one, or as a whole group with one single command; single elements, or classes thereof can be removed; elements can be replaced by others; finally, the sequence can be "flattened", i.e. all inserted sequences are replaced by their actual elements, such that a flattened sequence contains only elements. It is good practice to add a \textit{ flatten; } statement at the end of a \textit{ seqedit operation } to ensure a fully operational sequence. And this is particularly useful for the \textit{ save } command to properly save \textit{ shared sequences } and to write out in \textit{ MAD-8 } format.  


\begin{itemize}
	\item SEQEDIT
\begin{verbatim}

seqedit, sequence=s_name;
\end{verbatim} selects the sequence named for editing. The editing is performed on the non-expanded sequence; after having finished the editing, one has to re-expand the sequence if necessary. 




	\item EXTRACT
\begin{verbatim}

extract,sequence=s_name,from=MARKER_1,to=MARKER_2,newname=p;
\end{verbatim} From the sequence named "s\_name" is extracted a new sequence with name "p" starting from MARKER\_1 and ending at MARKER\_2. The new sequence "p" can be USEd as any other sequence. It is declared as "shared" and can therefore be combined E.G. into the cycled original sequence. 


	\item FLATTEN
\begin{verbatim}

flatten;
\end{verbatim} This command includes all sequences in the sequence being edited, if any. The resulting sequence contains only elements. 


	\item INSTALL
\begin{verbatim}

install, element=name,class=class_name,at=real,from=place|selected;
\end{verbatim} where the parameters have the following meaning: 
\begin{itemize}
	\item element: name of the (new) element to be inserted (mandatory) 
	\item class: class of the new element to be inserted (mandatory) 
	\item at: position where the element is to be inserted; if no "from" is given,this is relative to the start of the sequence. If "from" is given, it is relative to the position specified there. 
	\item from:either a place (i.e. the name(+occurrence count) of an element already existing in the sequence, e.g. mb[15], or mq.a..i1..4 etc.; or the string "selected"; in this latter case an element of the type specified will be inserted behind all elements in the sequence that are currently selected by one or several \href{../Introduction/select.html}{SELECT} commands of the type 
\begin{verbatim}

select,flag=seqedit,class=.., pattern=.., range=..;
\end{verbatim}
	\item \textit{ Attention: No element definitions inside seqedit. }


\end{itemize}
	\item MOVE
\begin{verbatim}

move, element=name|selected,by=real,to=real,from=place;
\end{verbatim}
\begin{itemize}
	\item element: name of the existing element to be moved, or "selected", in which case all elements from existing  \href{../Introduction/select.html}{SELECT} commands will be moved; in the latter case, "by" must be given. 
	\item by: amount by which the element(s) is/are to be moved; no "to" nor "from" in this case. 
	\item to: position to which the element has to be moved; if no from, then this is relative to the start of the sequence; otherwise, it is relative to the place given in "from". 
	\item from: place in the sequence with respect to which the element is to be positioned. 
\end{itemize}


	\item REMOVE
\begin{verbatim}

remove, element=name|selected;
\end{verbatim}
\begin{itemize}
	\item element: name of the existing element to be removed, or "selected", in which case all elements from existing  \href{../Introduction/select.html}{SELECT} commands will be removed. \textit{
	\item Attention: It is a bad idea to remove all markers from a sequence! In particular the "start=" marker and the new markers added by "cycle" must never be removed from a sequence.}


\end{itemize}
	\item CYCLE
\begin{verbatim}

cycle,start=place;
\end{verbatim} This makes the sequence start at the place given, which must be a marker. 

 In the case there is a shared sequence in the used sequence, the  command FLATTEN has to be used before the command CYCLE. Example: 

     flatten ; cycle,start=place; 




	\item REFLECT
\begin{verbatim}

reflect;
\end{verbatim} This inverts the order of element in the sequence, starting from the last element. 

 If there are shared sequences inside the USEd sequence, the command FLATTEN must be used before the command REFLECT.  Alternatively each shared sequence must first be reflected. Example:  

     flatten ; reflect; 




	\item REPLACE
\begin{verbatim}

replace,element=name1|selected,by=name2;
\end{verbatim} Element with name1 is replaced by element with name2. If name1 is "selected", then all elements selected by \href{../Introduction/select.html}{SELECT} commands will be replaced by the element name2. 


	\item ENDEDIT
\begin{verbatim}

endedit;
\end{verbatim} terminates the sequence editing process. The nodes in the sequence are renumbered according to their occurrence which might have changed during editing. 

\href{http://www.cern.ch/Hans.Grote/hansg_sign.html}{hansg}, June 17, 2002 
\end{itemize}

%%%\end{document}
