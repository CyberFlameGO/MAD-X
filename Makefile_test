# |
# o---------------------------------------------------------------------o
# |
# | MAD makefile - Tests
# |
# o---------------------------------------------------------------------o
# |
# | Methodical Accelerator Design
# |
# | Copyright (c) 2011+ CERN, mad@cern.ch
# |
# | For more information, see http://cern.ch/mad
# |
# o---------------------------------------------------------------------o
# |
# | $Id$
# |

#################################################
# testsuite

# variables:
# tests-all  : contains all tests
# tests-long : contains all long tests

# rules:
# tests      : runs all tests not in tests-long
# tests-all  : runs all tests

ifndef TESTS

tests-all := \
test-jacobian test-jacobian-2 test-jacobian-knobs \
test-match test-match-2 \
test-rfmultipole test-rfmultipole-2 test-rfmultipole-3 test-rfmultipole-4 \
test-ptc-twiss

tests-long := \
test-match-2 \
test-ptc-twiss

endif

# testsuite titles (attached to first rule of your suite)
test-jacobian:     TESTSUITE := Jacobian testsuite
test-match:        TESTSUITE := Matching testsuite
test-rfmultipole:  TESTSUITE := RF multipole testsuite
test-ptc-twiss:    TESTSUITE := PTC Twiss testsuite

# end of testsuite
#################################################

# madx command for tests
ifndef MADX
MADX    = $(PRJNAME)$(BINARY_EXT)
TESTCMD = $(if $(wildcard $(MADX)),..$/..$/$(MADX),$(MADX)) < $(@F).madx
else
TESTCMD = $(MADX) < $(@F).madx
endif

# end of makefile
