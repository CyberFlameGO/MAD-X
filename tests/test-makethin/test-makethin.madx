! H. Burkhardt.  Updated for improved makethin select in summer 2005

title,"Five cell test";

option,-echo,-warn;
call,file="fivecell.seq";   ! load the sequence
option,echo,warn,info;

beam;
use,sequence=fivecell;      ! for twiss and makethin
twiss,sequence=fivecell,betx=1,bety=1,file="twiss1.tfs";

!select, flag=makethin, class=rbend, slice=0; ! thick=true; ! slice all quadrupoles in 5 slices
!select, flag=makethin, class=quadrupole, slice=5; !, thick=true; ! slice all quadrupoles in 5 slices

select, flag=makethin, class=quadrupole, slice=5; ! slice all quadrupoles in 5 slices
makethin,sequence=fivecell;
use,sequence=fivecell;      ! use the thin sequence
twiss,sequence=fivecell;    ! to allow to compare in output if betx,dx max etc agree to some percent
!twiss,sequence=fivecell,betx=1,bety=1,file="twiss2.tfs";    ! to allow to compare in output if betx,dx max etc agree to some percent with the thick twiss results
save,sequence=fivecell,file="fivecell_thin.seq";

stop;
