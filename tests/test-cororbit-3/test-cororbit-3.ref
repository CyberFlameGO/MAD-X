
  +++++++++++++++++++++++++++++++++++++++++++
  +    MAD-X 5.02.00  (32 bit, Darwin)      +
  +           Production Version            +
  + Code Modification Date: 2014.03.05      +
  + Execution Time Stamp: 12.03.14 15.11.00 +
  +++++++++++++++++++++++++++++++++++++++++++
TITLE, s='MAD-X test';

option, -echo;



Beam, particle = proton, sequence=fivecell, energy = 450.0;



use, period=fivecell;



select, flag=twiss, clear;

select, flag=twiss, column=name,s,x,px,y,py,betx,bety,alfx,alfy;



Twiss,table=my_model;

enter Twiss module
++++++ info: Zero value of SIGT replaced by 1.
++++++ info: Zero value of SIGE replaced by 1/1000.
  
iteration:   1 error:   0.000000E+00 deltap:   0.000000E+00
orbit:   0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00

++++++ table: summ

            length             orbit5               alfa            gammatr 
             534.6                 -0       0.7550664348        1.150820044 

                q1                dq1            betxmax              dxmax 
       1.244699156        1.057609164        176.2485025        89.96991415 

             dxrms             xcomax             xcorms                 q2 
       70.29186534                  0                  0        1.851522795 

               dq2            betymax              dymax              dyrms 
      0.3300422622        184.8372928                  0                  0 

            ycomax             ycorms             deltap            synch_1 
                 0                  0                  0                  0 

           synch_2            synch_3            synch_4            synch_5 
                 0                  0                  0                  0 


Readmytable,file="input/orbps.in",table=orbint;

Want to make named table: orbint


coption, print=2;



Correct, flag=ring, model=my_model, orbit=orbint, extern, 

	 mode=micado, cond=0, error=1.0e-7, ncorr=5, plane=x, 

	 clist=c1.tab, mlist=m1.tab;

Want to correct orbit of a single ring
Want to use orbit from: orbint
Want to use model orbit from: my_model
11 monitors and 10 correctors found in input
11 monitors and 10 correctors enabled
enter MICADO correction ...
  
 start MICADO correction with            5  correctors
  
CORRECTION SUMMARY:   

                   average [mm]   std.dev. [mm]      RMS [mm]        peak-to-peak [mm]

before correction: -0.925909        3.530367          3.649767        12.131072 
after correction:  0.046673        0.230811          0.235483        0.768439 


Monitor:  Before:     After:    Difference:
           (mm)        (mm)         (mm)   
bpha:1   2.427     0.230     -2.196
bpv1:1   2.426     0.233     -2.193
bph2:1   4.481     -0.129     -4.610
bpv2:1   -0.853     0.095     0.948
bph3:1   -7.650     0.121     7.771
bpv3:1   -4.185     -0.454     3.731
bph4:1   -3.919     0.163     4.081
bpv4:1   -1.629     0.274     1.903
bph5:1   -3.700     -0.179     3.521
bpv5:1   -0.073     0.314     0.388
bph1:1   2.491     -0.154     -2.645
Max strength: 1.050740e+01 should be less than corrector strength limit: 1.000000e+00
++++++ warning: maximum corrector strength larger than limit 
Max strength: 1.050740e+01
Corrector:  Before:     After:    Difference:
             (mrad)     (mrad)       (mrad)  
cbh.10:1 0.000000 -0.006159 -0.006159
cbh.11:1 0.000000 0.000000 0.000000
cbh.20:1 0.000000 0.801052 0.801052
cbh.21:1 0.000000 -0.781478 -0.781478
cbh.30:1 0.000000 0.000000 0.000000
cbh.31:1 0.000000 0.000000 0.000000
cbh.40:1 0.000000 -10.427039 -10.427039
cbh.41:1 0.000000 10.507403 10.507403
cbh.50:1 0.000000 0.000000 0.000000
cbh.51:1 0.000000 0.000000 0.000000


Twiss, file=result1;

enter Twiss module
++++++ info: Zero value of SIGT replaced by 1.
++++++ info: Zero value of SIGE replaced by 1/1000.
  
iteration:   1 error:   9.607860E-04 deltap:   0.000000E+00
orbit:  -2.692913E-03 -5.679609E-05  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00
  
iteration:   2 error:   4.555392E-09 deltap:   0.000000E+00
orbit:  -2.692996E-03 -5.679766E-05  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00

++++++ table: summ

            length             orbit5               alfa            gammatr 
             534.6                 -0       0.7550586757        1.150825957 

                q1                dq1            betxmax              dxmax 
        1.24474163        1.057560715        176.2721977        89.98629139 

             dxrms             xcomax             xcorms                 q2 
       70.29096636     0.007949547122     0.003688039623        1.851582283 

               dq2            betymax              dymax              dyrms 
      0.3300002001        184.9736426                  0                  0 

            ycomax             ycorms             deltap            synch_1 
                 0                  0                  0                  0 

           synch_2            synch_3            synch_4            synch_5 
                 0                  0                  0                  0 


Correct, flag=ring, model=my_model, orbit=orbint, extern, 

	 mode=micado, cond=1, error=1.0e-7, ncorr=5, plane=x, 

	 clist=c2.tab, mlist=m2.tab;

Want to correct orbit of a single ring
Want to use orbit from: orbint
Want to use model orbit from: my_model
11 monitors and 10 correctors found in input
11 monitors and 10 correctors enabled
SVD conditioning requested ...
Initially found 10 singular values
After SVD conditioning:             
11 monitors and 5 correctors enabled

Finally found 0 singular values
enter MICADO correction ...
  
 start MICADO correction with            5  correctors
  
CORRECTION SUMMARY:   

                   average [mm]   std.dev. [mm]      RMS [mm]        peak-to-peak [mm]

before correction: -0.925909        3.530367          3.649767        12.131072 
after correction:  0.022958        0.277952          0.278899        1.011518 


Monitor:  Before:     After:    Difference:
           (mm)        (mm)         (mm)   
bpha:1   2.427     0.221     -2.206
bpv1:1   2.426     0.223     -2.203
bph2:1   4.481     -0.085     -4.566
bpv2:1   -0.853     -0.136     0.717
bph3:1   -7.650     0.199     7.850
bpv3:1   -4.185     -0.476     3.709
bph4:1   -3.919     -0.041     3.878
bpv4:1   -1.629     0.536     2.164
bph5:1   -3.700     -0.234     3.466
bpv5:1   -0.073     0.269     0.342
bph1:1   2.491     -0.223     -2.714
Max strength: 6.612385e-02 is below corrector strength limit: 1.000000e+00
Max strength: 6.612385e-02
Corrector:  Before:     After:    Difference:
             (mrad)     (mrad)       (mrad)  
cbh.11:1 0.000000 -0.006350 -0.006350
cbh.21:1 -0.781478 -0.750491 0.030987
cbh.31:1 0.000000 -0.005797 -0.005797
cbh.41:1 10.507403 10.573527 0.066124
cbh.51:1 0.000000 0.004547 0.004547


Twiss, file=result2;

enter Twiss module
++++++ info: Zero value of SIGT replaced by 1.
++++++ info: Zero value of SIGE replaced by 1/1000.
  
iteration:   1 error:   1.774853E-03 deltap:   0.000000E+00
orbit:  -5.453893E-03 -1.140867E-04  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00
  
iteration:   2 error:   3.982810E-08 deltap:   0.000000E+00
orbit:  -5.454226E-03 -1.140928E-04  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00

++++++ table: summ

            length             orbit5               alfa            gammatr 
             534.6                 -0       0.7550499222        1.150832628 

                q1                dq1            betxmax              dxmax 
       1.244783623        1.057511484        176.2934582        90.00729875 

             dxrms             xcomax             xcorms                 q2 
       70.29023833      0.01599266264      0.00742049109        1.851641147 

               dq2            betymax              dymax              dyrms 
      0.3299561764        185.1125331                  0                  0 

            ycomax             ycorms             deltap            synch_1 
                 0                  0                  0                  0 

           synch_2            synch_3            synch_4            synch_5 
                 0                  0                  0                  0 


Correct, flag=ring, model=my_model, orbit=orbint, extern, 

	 mode=svd, cond=1, error=1.0e-7, ncorr=5, plane=x, 

	 clist=c3.tab, mlist=m3.tab;

Want to correct orbit of a single ring
Want to use orbit from: orbint
Want to use model orbit from: my_model
11 monitors and 10 correctors found in input
11 monitors and 10 correctors enabled
SVD conditioning requested ...
Initially found 10 singular values
After SVD conditioning:             
11 monitors and 5 correctors enabled

Finally found 0 singular values
  
 start SVD correction using            5  correctors
  
CORRECTION SUMMARY:   

                   average [mm]   std.dev. [mm]      RMS [mm]        peak-to-peak [mm]

before correction: -0.925909        3.530367          3.649767        12.131072 
after correction:  0.022958        0.277952          0.278899        1.011518 


Monitor:  Before:     After:    Difference:
           (mm)        (mm)         (mm)   
bpha:1   2.427     0.221     -2.206
bpv1:1   2.426     0.223     -2.203
bph2:1   4.481     -0.085     -4.566
bpv2:1   -0.853     -0.136     0.717
bph3:1   -7.650     0.199     7.850
bpv3:1   -4.185     -0.476     3.709
bph4:1   -3.919     -0.041     3.878
bpv4:1   -1.629     0.536     2.164
bph5:1   -3.700     -0.234     3.466
bpv5:1   -0.073     0.269     0.342
bph1:1   2.491     -0.223     -2.714
Max strength: 6.612385e-02 is below corrector strength limit: 1.000000e+00
Max strength: 6.612385e-02
Corrector:  Before:     After:    Difference:
             (mrad)     (mrad)       (mrad)  
cbh.11:1 -0.006350 -0.012700 -0.006350
cbh.21:1 -0.750491 -0.719504 0.030987
cbh.31:1 -0.005797 -0.011593 -0.005797
cbh.41:1 10.573527 10.639651 0.066124
cbh.51:1 0.004547 0.009093 0.004547


Twiss, file=result3;

enter Twiss module
++++++ info: Zero value of SIGT replaced by 1.
++++++ info: Zero value of SIGE replaced by 1/1000.
  
iteration:   1 error:   2.588243E-03 deltap:   0.000000E+00
orbit:  -8.213492E-03 -1.713771E-04  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00
  
iteration:   2 error:   1.068718E-07 deltap:   0.000000E+00
orbit:  -8.214239E-03 -1.713907E-04  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00

++++++ table: summ

            length             orbit5               alfa            gammatr 
             534.6                 -0       0.7550411897        1.150839283 

                q1                dq1            betxmax              dxmax 
       1.244825599        1.057462555        176.3147002        90.02829448 

             dxrms             xcomax             xcorms                 q2 
       70.28951653      0.02403289536       0.0111547781        1.851700034 

               dq2            betymax              dymax              dyrms 
      0.3299119599        185.2515875                  0                  0 

            ycomax             ycorms             deltap            synch_1 
                 0                  0                  0                  0 

           synch_2            synch_3            synch_4            synch_5 
                 0                  0                  0                  0 


Correct, flag=ring, model=my_model, orbit=orbint, extern, 

	 mode=lsq, cond=1, error=1.0e-7, ncorr=5, plane=x, 

	 clist=c4.tab, mlist=m4.tab;

Want to correct orbit of a single ring
Want to use orbit from: orbint
Want to use model orbit from: my_model
11 monitors and 10 correctors found in input
11 monitors and 10 correctors enabled
SVD conditioning requested ...
Initially found 10 singular values
After SVD conditioning:             
11 monitors and 5 correctors enabled

Finally found 0 singular values
  
 start LEAST SQUARES correction with all correctors
  
 IFAIL from lstsql:            0
  
 end LEAST SQUARES correction with all correctors
  
CORRECTION SUMMARY:   

                   average [mm]   std.dev. [mm]      RMS [mm]        peak-to-peak [mm]

before correction: -0.925909        3.530367          3.649767        12.131072 
after correction:  0.022958        0.277952          0.278899        1.011518 


Monitor:  Before:     After:    Difference:
           (mm)        (mm)         (mm)   
bpha:1   2.427     0.221     -2.206
bpv1:1   2.426     0.223     -2.203
bph2:1   4.481     -0.085     -4.566
bpv2:1   -0.853     -0.136     0.717
bph3:1   -7.650     0.199     7.850
bpv3:1   -4.185     -0.476     3.709
bph4:1   -3.919     -0.041     3.878
bpv4:1   -1.629     0.536     2.164
bph5:1   -3.700     -0.234     3.466
bpv5:1   -0.073     0.269     0.342
bph1:1   2.491     -0.223     -2.714
Max strength: 6.612385e-02 is below corrector strength limit: 1.000000e+00
Max strength: 6.612385e-02
Corrector:  Before:     After:    Difference:
             (mrad)     (mrad)       (mrad)  
cbh.11:1 -0.012700 -0.019051 -0.006350
cbh.21:1 -0.719504 -0.688517 0.030987
cbh.31:1 -0.011593 -0.017390 -0.005797
cbh.41:1 10.639651 10.705775 0.066124
cbh.51:1 0.009093 0.013640 0.004547


Twiss, file=result4;

enter Twiss module
++++++ info: Zero value of SIGT replaced by 1.
++++++ info: Zero value of SIGE replaced by 1/1000.
  
iteration:   1 error:   3.400956E-03 deltap:   0.000000E+00
orbit:  -1.097171E-02 -2.286673E-04  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00
  
iteration:   2 error:   2.066290E-07 deltap:   0.000000E+00
orbit:  -1.097304E-02 -2.286915E-04  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00

++++++ table: summ

            length             orbit5               alfa            gammatr 
             534.6                 -0       0.7550324782        1.150845922 

                q1                dq1            betxmax              dxmax 
       1.244867557        1.057413929        176.3359237        90.04927864 

             dxrms             xcomax             xcorms                 q2 
       70.28880093      0.03207024788        0.014889247        1.851758946 

               dq2            betymax              dymax              dyrms 
      0.3298675501        185.3908065                  0                  0 

            ycomax             ycorms             deltap            synch_1 
                 0                  0                  0                  0 

           synch_2            synch_3            synch_4            synch_5 
                 0                  0                  0                  0 




removefile, file='fort.61';

removefile, file='fort.65';

++++++ warning: unable to remove file:  fort.65
removefile, file='fort.66';

++++++ warning: unable to remove file:  fort.66

  Number of warnings: 3
3 in C and 0 in Fortran

  ++++++++++++++++++++++++++++++++++++++++++++
  + MAD-X 5.02.00 (32 bit) finished normally +
  ++++++++++++++++++++++++++++++++++++++++++++
